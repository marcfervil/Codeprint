<html>
    <head>
        <title>Codeprint</title>
        <link rel="stylesheet" href="style.css">
    </head>

    <body>
        <div id="app" style="margin: 10px">
            
            
        </div>
    </body>
    
</html>


<script type="text/javascript" src="util.js"></script>
<script type="text/javascript" src="stateful.js"></script>
<script type="text/javascript" src="blueprint.js"></script>


<script type="text/javascript">


/*
    get("app").appendChild(new GizmoView([

        new ListView(["item1", "item2", "item3"], (item) => 

            new TextView(item).br().event("click", (self, event) => {
                
                get("yuh").items.push("clicked "+self.text)
                self.text = "clicked!"
               
            })

         ).prop("id", "yuh")
    ]));*/


    
    /*
    get("app").appendChild(new GizmoView({

        state: {
            items: ["item1", "item2", "item3"]
        },

        
        render: (state) => [

            new ListView(state.items, (item) => 

                new TextView(item).br().event("click", (self, event) => {
                    state.items.push(self.text+" clicked!")
                    self.text = "I've been clicked"
                })

            )
        ]
    }));*/


/*    
    get("app").appendChild(new GizmoView({

        state: {
            greeting: "hi"
        },

        render: (state) => [
            new TextView(state.greeting).br().event("click", (self, event) => {
                state.greeting = "I've been clicked"
            })
        ]
    }))*/
    
/*
    
    get("app").appendChild(new GizmoView({

        state: {
            items: ["item1", "item2", "item3"]
        },


        render: (state) => [
            new ListView(state.items, (item, index) => 

                new TextView(item).br().event("click", (self, event) => {
                    state.items[index] = "he was # "+index
                })

            )
        ]
    }).br().br());*/

    
    /*
    get("app").appendChild(new GizmoView({

        state: {
           str: "Stateful !"
            
        },
       
       
        render: (state) => [
            
            
            new TextView(state.str).br().event("click", (self, event) => {
                // / = "ifwej"
                state.str = "hi"
                
                
            })

        
        ]
    }))*/


    /*
    let state = new State({hello: "world"})
   

    
    state.notify.hello = {
        update: (value) => {
            console.log("updated hello to", value)
        }
    }

    state.hello = "wow";

    console.log(state.hello)*/

   

    
    let state = new State({
        nums: [1, 2, 3], 
        primitive: "some value",
        obj: {
            name: "yup"
        }
    })
    
    
    state.notify.primitive = {
       
        update: (value, index) => {
            console.log(`updated to ${value}`)
        },
    }

    state.primitive = "1) primitive works"
    state.primitive = "1.5) primitive works"
    
    
    state.notify.nums = {
        append: (value) => {
            console.log("appended", value)
        },
        update: (value, index) => {
            console.log(`updated ${index} to ${value}`)
        },
    }

    state.nums.push("2) array appending works")
    state.nums[0] = "3) array mutation works"

    state.notify.nums[0] = {
        
        update: (value ) => {
            console.log(`updated to ${value}`)
        },
    }

    state.nums[0] = "4) array mutation notification works"
    state.nums[0] = "5) array remutation notification works"
    

    state.obj.notify.name = {
        update: (value) => {
            console.log(`updated to ${value}`)
        },
    }
  
    state.obj.name = "6) object updates work"
    state.obj.name = "7) object updates work"


    attachState = {}

    new Stateful(3).attach(attachState, "hi")
    //console.log(attachState)
    attachState.notify.hi = {
        update: (value) => {
            console.log(`updated to ${value}`)
        },
    }
    
    attachState.hi = "attachments work!"


</script>
